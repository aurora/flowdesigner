<html>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/paper.js/0.9.21/paper-full.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js"></script>
    <body>
        <canvas id="canvas" resize style="border: 1px solid #000;"></canvas>
        <script type="text/javascript" src="../flowdesigner.js"></script>
        <script type="text/javascript" src="../src/connector.js"></script>
        <script type="text/javascript" src="../src/wire.js"></script>
        <script type="text/javascript" src="../src/node.js"></script>
        <script type="text/javascript" src="../src/diagram.js"></script>
        <script type="text/javascript">
        ;(function() {
            var d = new flowdesigner('canvas');
			var n;

            d.defineScope('image', {
                'color': '#00aa00'
            });
            d.defineScope('ctrl', {
                'color': '#aaaaff'
            });
            d.defineScope('video', {
                'color': '#aaaa00'
            });

            d.addNode(n = new flowdesigner.node(d, {
				'label': 'Node #1',
				'x': 125,
				'y': 35,
                'input': [
                    {
                        'name': 'in-1',
                        'label': 'Image',
                        'scopes': ['image']
                    },
                    {
                        'name': 'in-2',
                        'label': 'Control',
                        'scopes': ['ctrl']
                    }
                ],
                'output': [
                    {
						'name': 'out-1',
						'label': 'Image',
						'scopes': ['image']
					},
                    {
						'name': 'out-2',
						'label': 'Control',
						'scopes': ['ctrl']
					}
                ]
            }));
			n.render();
			
            d.addNode(n = new flowdesigner.node(d, {
				'label': 'Node #2',
                'color': '#550000',
				'x': 426,
				'y': 142,
                'input': [
                    {
                        'name': 'in-1',
                        'label': 'Image',
                        'scopes': ['image']
                    },
                    {
                        'name': 'in-2',
                        'label': 'Watermark',
                        'scopes': ['image']
                    }
                ],
                'output': [
                    {
						'name': 'out-1',
						'label': 'Image',
						'scopes': ['image']
					}
                ]
            }));
			n.render();

            d.addNode(n = new flowdesigner.node(d, {
				'label': 'Node #3',
                'color': '#55aa00',
				'x': 725,
				'y': 35,
                'input': [
                    {
                        'name': 'in-1',
                        'label': 'Output',
                        'scopes': ['image']
                    }
                ]
            }));
			n.render();
		
/*            d.addWires(
    [{"source":"node-1-out-1","target":"node-2-in-1"},{"source":"node-1-out-2","target":"node-2-in-2"},{"source":"node-1-out-1","target":"node-3-in-1"},{"source":"node-2-out-1","target":"node-3-in-2"}]
            );*/
        })();
        </script>
    </body>
</html>